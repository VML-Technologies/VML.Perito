# .htaccess file for a React App

# ----------------------------------------------------------------------
# | General Configuration                                              |
# ----------------------------------------------------------------------

# Enable the RewriteEngine
RewriteEngine On

# Set the base URL for rewriting. If your app is in a subdirectory, e.g., example.com/my-app/,
# you would set RewriteBase /my-app/
# If your app is at the root, you can comment this out or set it to /
# RewriteBase /

# ----------------------------------------------------------------------
# | Client-Side Routing (React Router)                                 |
# ----------------------------------------------------------------------

# Redirect all non-file, non-directory requests to index.html
# This is crucial for client-side routing (e.g., React Router)
# It ensures that when a user directly accesses a path like /about,
# the server serves index.html, and React Router then handles the path.

RewriteRule ^index\.html$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]

# ----------------------------------------------------------------------
# | Caching Directives (Optional but Recommended)                      |
# ----------------------------------------------------------------------

# These directives are for better performance by leveraging browser caching.
# Adjust max-age values as needed.

<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresDefault "access plus 1 month"

    # Cache HTML files for a short period (e.g., 1 hour)
    ExpiresByType text/html "access plus 1 hour"

    # Cache CSS, JavaScript, and images for a longer period (e.g., 1 year)
    ExpiresByType text/css "access plus 1 year"
    ExpiresByType application/javascript "access plus 1 year"
    ExpiresByType application/x-javascript "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/svg+xml "access plus 1 year"
    ExpiresByType application/font-woff "access plus 1 year"
    ExpiresByType application/font-woff2 "access plus 1 year"
    ExpiresByType application/vnd.ms-fontobject "access plus 1 year"
    ExpiresByType application/x-font-ttf "access plus 1 year"
</IfModule>

# ----------------------------------------------------------------------
# | Gzip Compression (Optional but Recommended)                        |
# ----------------------------------------------------------------------

# Compress common file types to reduce bandwidth usage and speed up loading.
# Ensure mod_deflate is enabled on your server.

<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
    AddOutputFilterByType DEFLATE application/json
</IfModule>

# ----------------------------------------------------------------------
# | Error Pages (Optional)                                             |
# ----------------------------------------------------------------------

# Define custom error pages (e.g., for 404 Not Found)
# ErrorDocument 404 /index.html
