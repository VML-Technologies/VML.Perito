# JavaScript Context Binding Best Practices

## Constructor Pattern for Class Methods

Always use constructor binding for class methods that will be used in callbacks, async operations, or Promise chains:

```javascript
class MyController {
  constructor() {
    // Bind methods to the instance to ensure 'this' context is maintained
    this.method1 = this.method1.bind(this);
    this.method2 = this.method2.bind(this);
    this.auxiliaryMethod = this.auxiliaryMethod.bind(this);
  }

  async method1() {
    // This will work correctly in any context
  }
}
```

## Common Context Issues

- ❌ `this.method()` in Promise.all() with map() - loses context
- ❌ `const self = this` - works but less elegant
- ✅ Constructor binding - clean, maintainable, standard

## When to Apply

- Controller classes that handle HTTP requests
- Classes with async methods used in callbacks
- Methods that use `this` internally
- Classes exported as singletons (new MyClass())

## Example from ScheduleController

See [scheduleController.js](mdc:apps/server/controllers/scheduleController.js) for proper implementation.
description:
globs:
alwaysApply: false

---
